# 📊 DRY Анализ - Визуализация

## 🔥 Карта дублирований

```
┌─────────────────────────────────────────────────────────────────┐
│                        App.tsx (1200 строк)                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  🔴 Градиентные кнопки × 6                                      │
│  ├─ строка 75:  Навигация "Забронировать"                      │
│  ├─ строка 119: Hero "Начать обучение"                         │
│  ├─ строка 126: Hero "Подробнее"                               │
│  ├─ строка 906: Тариф Standard                                 │
│  ├─ строка 956: Тариф Premium (предположительно)               │
│  └─ строка ???: Ещё кнопки...                                  │
│                                                                  │
│  🔴 Badge компоненты × 3                                        │
│  ├─ строка 180:  "НОВОЕ" (было/стало)                          │
│  ├─ строка 814:  "🔥 СПЕЦИАЛЬНОЕ ПРЕДЛОЖЕНИЕ"                  │
│  └─ строка 1026: "ХИТ 🔥" (кросс-продажи)                      │
│                                                                  │
│  🔴 Массив отзывов × 15 объектов                                │
│  └─ строки 680-780: 15 × { initial, name, handle, text }       │
│                                                                  │
│  🔴 Массив галереи × 8 объектов                                 │
│  └─ строки 607-616: 8 × { img, title }                         │
│                                                                  │
│  🟡 Карточки достижений × 3                                     │
│  └─ строки 231-260                                              │
│                                                                  │
│  🟡 Списки фич тарифов × 2                                      │
│  └─ строки 886-903, 940-965                                     │
│                                                                  │
│  🟡 Название школы × 2                                          │
│  ├─ строка 61:   Навбар                                         │
│  └─ строка 1186: Футер                                          │
│                                                                  │
│  🟡 Заголовки секций × 7                                        │
│  └─ ~10 секций с одинаковой структурой                         │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                       index.tsx (500 строк)                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  🔴 Градиентные кнопки × 4                                      │
│  ├─ строка 26:  Навигация                                       │
│  ├─ строка 83:  Hero "Все курсы"                               │
│  ├─ строка 423: CTA "Записаться на бенто"                      │
│  └─ строка ???: Ещё кнопки...                                  │
│                                                                  │
│  🔴 Карточки курсов × 6                                         │
│  ├─ Бенто-торты (ОТКРЫТ)                                        │
│  ├─ Медовики (ХИТ)                                              │
│  ├─ Контурные рисунки (скоро)                                  │
│  ├─ Роспись пряников (скоро)                                   │
│  ├─ Премиальное печенье (скоро)                                │
│  └─ Вирусные Reels (скоро)                                     │
│                                                                  │
│  🔴 Badge компоненты × 3+                                       │
│  ├─ строка 201: "ОТКРЫТ 🎉"                                     │
│  ├─ строка 235: "ХИТ 🔥"                                        │
│  └─ строка ???: "СКОРО" (множество раз)                        │
│                                                                  │
│  🟡 Название школы × 3                                          │
│  ├─ строка 13:  Навбар                                          │
│  ├─ строка 449: Футер                                           │
│  └─ строка ???: Другие места                                    │
│                                                                  │
│  🟡 Карточки достижений × 3                                     │
│  └─ Об авторе секция                                            │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                     privacy.tsx (200 строк)                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  🔴 Градиентные кнопки × 2                                      │
│  ├─ строка 14:  Навбар "← Назад"                               │
│  └─ строка 201: "← Вернуться на главную"                       │
│                                                                  │
│  🟡 Название школы × 2                                          │
│  └─ строки 9, 41                                                │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                  PaymentModal.tsx (230 строк)                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  🔴 Градиентная кнопка × 1                                      │
│  └─ строка 211: "Перейти к оплате"                             │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 📈 Распределение повторений по файлам

```
Файл              Кнопки  Badge  Карточки  Данные  Название  Заголовки
─────────────────────────────────────────────────────────────────────
App.tsx             6       3       3       23        2         7
index.tsx           4       3+      6       0         3         4
privacy.tsx         2       0       0       0         2         0
PaymentModal.tsx    1       0       0       0         0         0
PrivacyModal.tsx    0       0       0       0         1         0
─────────────────────────────────────────────────────────────────────
ИТОГО              13+      6+      9+      23        8+        11+
```

---

## 🎯 Приоритизация по влиянию

```
Высокий приоритет (🔴):
┌──────────────────────────────────────────────────┐
│ 1. Кнопки          ████████████████ 14 повторов │
│ 2. Отзывы          ███████████████  15 объектов │
│ 3. Карточки курсов ██████████       10 карточек │
│ 4. Badge           ██████           6+ badge    │
│ 5. Название школы  ████████         13 раз      │
└──────────────────────────────────────────────────┘

Средний приоритет (🟡):
┌──────────────────────────────────────────────────┐
│ 6. Заголовки       ███████████      11 секций   │
│ 7. Данные галереи  ████████         8 фото      │
│ 8. Карточки фич    ███              3 карточки  │
│ 9. Стили hover     ███████████████  30+ раз     │
│ 10. Списки фич     ██               2 списка    │
└──────────────────────────────────────────────────┘
```

---

## 💰 ROI рефакторинга

```
Инвестиция времени:
├─ Фаза 1: Компоненты     2 часа   ████████
├─ Фаза 2: Данные         0.5 часа ██
└─ Фаза 3: Рефакторинг    3 часа   ████████████
                          ─────────
                     ИТОГО: 5.5 часов

Экономия кода:
├─ Строк кода:    -300 строк
├─ Символов:      -8500 символов
└─ Дублирований:  -70+ повторений

Выгода в долгосрочной перспективе:
├─ Время на изменение дизайна:  -80% ████████████████
├─ Риск ошибок:                 -90% ██████████████████
├─ Скорость разработки новых фич: +50% ██████████
└─ Качество кода:               +100% ████████████████████
```

---

## 🗺️ До и После

### ДО рефакторинга:

```
App.tsx                          1200 строк
├─ Кнопка 1 (300 символов)
├─ Кнопка 2 (300 символов)      
├─ Кнопка 3 (300 символов)      } 1800 символов
├─ Кнопка 4 (300 символов)        дублированного кода
├─ Кнопка 5 (300 символов)
├─ Кнопка 6 (300 символов)
├─ Badge 1 (150 символов)
├─ Badge 2 (150 символов)
├─ Badge 3 (150 символов)
├─ Отзыв 1-15 (100 символов × 15)
├─ Карточка курса 1-3 (200 символов × 3)
└─ ...

Проблемы:
❌ Трудно менять дизайн (нужно править в 14 местах)
❌ Легко забыть обновить где-то
❌ Сложно добавлять новые варианты
❌ Много повторяющегося кода
```

### ПОСЛЕ рефакторинга:

```
/components/ui/
├─ Button.tsx                    50 строк (1 раз написали)
├─ Badge.tsx                     30 строк (1 раз написали)
└─ ...

/data/
├─ testimonials.ts               50 строк (чистые данные)
├─ courses.ts                    40 строк (чистые данные)
└─ ...

App.tsx                          800 строк
├─ <GoldButton>Текст</GoldButton>      (20 символов)
├─ <GoldButton>Текст</GoldButton>      (20 символов)
├─ <GoldBadge>НОВОЕ</GoldBadge>        (20 символов)
├─ {TESTIMONIALS.map(...)}             (50 символов)
└─ ...

Преимущества:
✅ Легко менять дизайн (1 место)
✅ Невозможно забыть обновить
✅ Просто добавлять варианты
✅ Чистый, читаемый код
```

---

## 🚀 Пример одного изменения

### Сценарий: Изменить цвет кнопок с золотого на синий

**ДО (без DRY):**
```
1. Открыть App.tsx
2. Найти кнопку 1 → изменить from-[#D4B896] на from-[#3B82F6]
3. Найти кнопку 2 → изменить from-[#D4B896] на from-[#3B82F6]
4. Найти кнопку 3 → изменить from-[#D4B896] на from-[#3B82F6]
5. Найти кнопку 4 → изменить from-[#D4B896] на from-[#3B82F6]
6. Найти кнопку 5 → изменить from-[#D4B896] на from-[#3B82F6]
7. Найти кнопку 6 → изменить from-[#D4B896] на from-[#3B82F6]
8. Открыть index.tsx
9. Найти кнопку 1 → изменить...
10. Найти кнопку 2 → изменить...
11. Открыть privacy.tsx
12. ...

⏱️ Время: 20-30 минут
⚠️ Риск: Высокий (легко пропустить)
```

**ПОСЛЕ (с DRY):**
```
1. Открыть /components/ui/Button.tsx
2. Изменить from-[#D4B896] на from-[#3B82F6]
3. Сохранить

⏱️ Время: 30 секунд
✅ Риск: Нулевой (всё обновится автоматически)
```

**Экономия:** 95% времени, 100% надёжности

---

## 📋 Чек-лист для начала

- [ ] Прочитать `/DRY_ANALYSIS.md`
- [ ] Прочитать `/DRY_SUMMARY.md`
- [ ] Создать ветку `refactor/dry-improvements`
- [ ] Создать `/components/ui/Button.tsx`
- [ ] Создать `/components/ui/Badge.tsx`
- [ ] Создать `/data/testimonials.ts`
- [ ] Заменить первую кнопку → протестировать
- [ ] Если работает → продолжить рефакторинг
- [ ] Создать PR с описанием изменений

---

## ❓ FAQ

**Q: Нужно ли рефакторить всё сразу?**  
A: Нет! Начните с одного компонента (например, GoldButton), замените везде, протестируйте. Потом следующий.

**Q: Что делать, если кнопка немного отличается?**  
A: Добавить props: `<GoldButton variant="outline">` или `<GoldButton size="lg">`

**Q: Не сломается ли дизайн?**  
A: Нет, если копировать классы точно. Можно делать по одному компоненту и тестировать.

**Q: Сколько времени это займёт?**  
A: ~5-6 часов на весь рефакторинг. Можно делать постепенно.

**Q: Стоит ли оно того?**  
A: ДА! Окупится при первом же изменении дизайна.

---

*Визуализация создана: Январь 2026*
